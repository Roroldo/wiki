{"remainingRequest":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\ts-loader\\index.js??ref--13-1!F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\MyProject\\MyWiki\\Wiki\\web\\src\\views\\doc.vue?vue&type=script&lang=ts","dependencies":[{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\src\\views\\doc.vue","mtime":1623050011000},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1631892357225},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\ts-loader\\index.js","mtime":1631892359045},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1631892357225},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1631892360081}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBvbk1vdW50ZWQsIHJlZiB9IGZyb20gJ3Z1ZSc7DQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KaW1wb3J0IHsgbWVzc2FnZSB9IGZyb20gJ2FudC1kZXNpZ24tdnVlJzsNCmltcG9ydCB7IFRvb2wgfSBmcm9tICJAL3V0aWwvdG9vbCI7DQppbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gInZ1ZS1yb3V0ZXIiOw0KZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsNCiAgICBuYW1lOiAnRG9jJywNCiAgICBzZXR1cDogZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgcm91dGUgPSB1c2VSb3V0ZSgpOw0KICAgICAgICB2YXIgZG9jcyA9IHJlZigpOw0KICAgICAgICB2YXIgaHRtbCA9IHJlZigpOw0KICAgICAgICB2YXIgZGVmYXVsdFNlbGVjdGVkS2V5cyA9IHJlZigpOw0KICAgICAgICBkZWZhdWx0U2VsZWN0ZWRLZXlzLnZhbHVlID0gW107DQogICAgICAgIC8vIOW9k+WJjemAieS4reeahOaWh+ahow0KICAgICAgICB2YXIgZG9jID0gcmVmKCk7DQogICAgICAgIGRvYy52YWx1ZSA9IHt9Ow0KICAgICAgICAvKioNCiAgICAgICAgICrkuIDnuqfmlofmoaPmoJHvvIxjaGlsZHJlbuWxnuaAp+WwseaYr+S6jOe6p+aWh+ahow0KICAgICAgICAgKiBbew0KICAgICAgICAgKiAgICAgaWQ6ICIiLA0KICAgICAgICAgKiAgICAgbmFtZTogIiIsDQogICAgICAgICAqICAgICBjaGlsZHJlbjogW3sNCiAgICAgICAgICogICAgICAgICBpZDogIiIsDQogICAgICAgICAqICAgICAgICAgbmFtZTogIiIsDQogICAgICAgICAqICAgICB9XQ0KICAgICAgICAgKiB9XQ0KICAgICAgICAgKi8NCiAgICAgICAgLy/kuIDnuqfmlofmoaPmoJEsY2hpbGRyZW7lsZ7mgKflsLHmmK/kuoznuqfmlofmoaMNCiAgICAgICAgdmFyIGxldmVsMSA9IHJlZigpOw0KICAgICAgICBsZXZlbDEudmFsdWUgPSBbXTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIOWGheWuueafpeivog0KICAgICAgICAgKi8NCiAgICAgICAgdmFyIGhhbmRsZVF1ZXJ5Q29udGVudCA9IGZ1bmN0aW9uIChpZCkgew0KICAgICAgICAgICAgYXhpb3MuZ2V0KCIvZG9jL2ZpbmQtY29udGVudC8iICsgaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgaHRtbC52YWx1ZSA9IGRhdGEuY29udGVudDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIOaVsOaNruafpeivog0KICAgICAgICAgKi8NCiAgICAgICAgdmFyIGhhbmRsZVF1ZXJ5ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgYXhpb3MuZ2V0KCIvZG9jL2FsbC8iICsgcm91dGUucXVlcnkuZWJvb2tJZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgICBkb2NzLnZhbHVlID0gZGF0YS5jb250ZW50Ow0KICAgICAgICAgICAgICAgICAgICBsZXZlbDEudmFsdWUgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgbGV2ZWwxLnZhbHVlID0gVG9vbC5hcnJheTJUcmVlKGRvY3MudmFsdWUsIDApOw0KICAgICAgICAgICAgICAgICAgICBpZiAoVG9vbC5pc05vdEVtcHR5KGxldmVsMSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRTZWxlY3RlZEtleXMudmFsdWUgPSBbbGV2ZWwxLnZhbHVlWzBdLmlkXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVF1ZXJ5Q29udGVudChsZXZlbDEudmFsdWVbMF0uaWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yid5aeL5pi+56S65paH5qGj5L+h5oGvDQogICAgICAgICAgICAgICAgICAgICAgICBkb2MudmFsdWUgPSBsZXZlbDEudmFsdWVbMF07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfTsNCiAgICAgICAgdmFyIG9uU2VsZWN0ID0gZnVuY3Rpb24gKHNlbGVjdGVkS2V5cywgaW5mbykgew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkJywgc2VsZWN0ZWRLZXlzLCBpbmZvKTsNCiAgICAgICAgICAgIGlmIChUb29sLmlzTm90RW1wdHkoc2VsZWN0ZWRLZXlzKSkgew0KICAgICAgICAgICAgICAgIC8vIOmAieS4reafkOS4gOiKgueCueaXtu+8jOWKoOi9veivpeiKgueCueeahOaWh+aho+S/oeaBrw0KICAgICAgICAgICAgICAgIGRvYy52YWx1ZSA9IGluZm8uc2VsZWN0ZWROb2Rlc1swXS5wcm9wczsNCiAgICAgICAgICAgICAgICAvL+WKoOi9veWGheWuuQ0KICAgICAgICAgICAgICAgIGhhbmRsZVF1ZXJ5Q29udGVudChzZWxlY3RlZEtleXNbMF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICAvLyDngrnotZ4NCiAgICAgICAgdmFyIHZvdGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBheGlvcy5nZXQoJy9kb2Mvdm90ZS8nICsgZG9jLnZhbHVlLmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIGRvYy52YWx1ZS52b3RlQ291bnQrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfTsNCiAgICAgICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGhhbmRsZVF1ZXJ5KCk7DQogICAgICAgIH0pOw0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgbGV2ZWwxOiBsZXZlbDEsDQogICAgICAgICAgICBodG1sOiBodG1sLA0KICAgICAgICAgICAgb25TZWxlY3Q6IG9uU2VsZWN0LA0KICAgICAgICAgICAgZGVmYXVsdFNlbGVjdGVkS2V5czogZGVmYXVsdFNlbGVjdGVkS2V5cywNCiAgICAgICAgICAgIGRvYzogZG9jLA0KICAgICAgICAgICAgdm90ZTogdm90ZQ0KICAgICAgICB9Ow0KICAgIH0NCn0pOw0K"},{"version":3,"file":"F:\\MyProject\\MyWiki\\Wiki\\web\\src\\views\\doc.vue.ts","sourceRoot":"","sources":["F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\MyProject\\MyWiki\\Wiki\\web\\src\\views\\doc.vue?vue&type=script&lang=ts"],"names":[],"mappings":"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","sourcesContent":["\n    import { defineComponent, onMounted, ref, createVNode } from 'vue';\n    import axios from 'axios';\n    import {message, Modal} from 'ant-design-vue';\n    import {Tool} from \"@/util/tool\";\n    import {useRoute} from \"vue-router\";\n\n    export default defineComponent({\n        name: 'Doc',\n        setup(){\n            const route = useRoute();\n            const docs = ref();\n            const html = ref();\n            const defaultSelectedKeys = ref();\n            defaultSelectedKeys.value = [];\n            // 当前选中的文档\n            const doc = ref();\n            doc.value = {};\n\n            /**\n             *一级文档树，children属性就是二级文档\n             * [{\n             *     id: \"\",\n             *     name: \"\",\n             *     children: [{\n             *         id: \"\",\n             *         name: \"\",\n             *     }]\n             * }]\n             */\n                //一级文档树,children属性就是二级文档\n            const level1 = ref();\n            level1.value = [];\n\n            /**\n             * 内容查询\n             */\n            const handleQueryContent = (id: number) => {\n                axios.get(\"/doc/find-content/\" + id).then((response) => {\n                    const data = response.data;\n                    if (data.success){\n                        html.value = data.content;\n                    }else {\n                        message.error(data.message);\n                    }\n                });\n            };\n\n\n\n            /**\n             * 数据查询\n             */\n            const handleQuery = () => {\n                axios.get(\"/doc/all/\" + route.query.ebookId).then((response) => {\n                    const data = response.data;\n                    if (data.success){\n                        docs.value = data.content;\n\n                        level1.value = [];\n                        level1.value = Tool.array2Tree(docs.value,0);\n\n                        if (Tool.isNotEmpty(level1)){\n                            defaultSelectedKeys.value = [level1.value[0].id];\n                            handleQueryContent(level1.value[0].id);\n                            // 初始显示文档信息\n                            doc.value = level1.value[0];\n                        }\n                    }else {\n                        message.error(data.message);\n                    }\n                });\n            };\n\n\n            const onSelect = (selectedKeys: any, info: any) => {\n                console.log('selected',selectedKeys,info);\n                if (Tool.isNotEmpty(selectedKeys)){\n                    // 选中某一节点时，加载该节点的文档信息\n                    doc.value = info.selectedNodes[0].props;\n                    //加载内容\n                    handleQueryContent(selectedKeys[0]);\n                }\n            }\n\n            // 点赞\n            const vote = () => {\n                axios.get('/doc/vote/' + doc.value.id).then((response) => {\n                    const data = response.data;\n                    if (data.success) {\n                        doc.value.voteCount++;\n                    } else {\n                        message.error(data.message);\n                    }\n                });\n            };\n\n\n            onMounted(() => {\n                handleQuery();\n            });\n\n            return {\n                level1,\n                html,\n                onSelect,\n                defaultSelectedKeys,\n                doc,\n                vote\n            }\n        }\n    });\n"]}]}