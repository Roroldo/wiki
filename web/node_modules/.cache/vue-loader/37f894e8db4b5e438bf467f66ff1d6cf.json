{"remainingRequest":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\MyProject\\MyWiki\\Wiki\\web\\src\\views\\doc.vue?vue&type=template&id=1090f72c","dependencies":[{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\src\\views\\doc.vue","mtime":1623050011000},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1631892361548},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1631892357225},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1631892360081}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICA8YS1sYXlvdXQ+CiAgICAgICAgPGEtbGF5b3V0LWNvbnRlbnQgOnN0eWxlPSJ7IGJhY2tncm91bmQ6ICcjZmZmJywgcGFkZGluZzogJzI0cHgnLCBtYXJnaW46IDAsIG1pbkhlaWdodDogJzI4MHB4JyB9Ij4KICAgICAgICAgICAgPGgzIHYtaWY9ImxldmVsMS5sZW5ndGggPT09IDAiPuWvueS4jei1t++8jOivpeaWh+aho+WGheWuueaaguacquS4iuS8oO+8gTwvaDM+CiAgICAgICAgICAgIDxhLXJvdz4KICAgICAgICAgICAgICAgIDxhLWNvbCA6c3Bhbj0iNiI+CiAgICAgICAgICAgICAgICAgICAgPGEtdHJlZQogICAgICAgICAgICAgICAgICAgICAgICB2LWlmPSJsZXZlbDEubGVuZ3RoID4gMCIKICAgICAgICAgICAgICAgICAgICAgICAgOnRyZWUtZGF0YT0ibGV2ZWwxIgogICAgICAgICAgICAgICAgICAgICAgICBAc2VsZWN0PSJvblNlbGVjdCIKICAgICAgICAgICAgICAgICAgICAgICAgOnJlcGxhY2VGaWVsZHM9Int0aXRsZTogJ25hbWUnLGtleTogJ2lkJywgdmFsdWU6ICdpZCd9IgogICAgICAgICAgICAgICAgICAgICAgICA6ZGVmYXVsdEV4cGFuZEFsbD0idHJ1ZSIKICAgICAgICAgICAgICAgICAgICAgICAgOmRlZmF1bHRTZWxlY3RlZEtleXM9ImRlZmF1bHRTZWxlY3RlZEtleXMiCiAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgIDwvYS10cmVlPgogICAgICAgICAgICAgICAgPC9hLWNvbD4KICAgICAgICAgICAgICAgIDxhLWNvbCA6c3Bhbj0iMTgiPgogICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxoMj57e2RvYy5uYW1lfX08L2gyPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+6ZiF6K+75pWwOiB7e2RvYy52aWV3Q291bnR9fTwvc3Bhbj4mbmJzcDsmbmJzcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPueCuei1nuaVsDoge3tkb2Mudm90ZUNvdW50fX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8YS1kaXZpZGVyIHN0eWxlPSJoZWlnaHQ6IDJweDsgYmFja2dyb3VuZC1jb2xvcjogIzk5OTljYyIgLz4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3YW5nZWRpdG9yIiA6aW5uZXJIVE1MPSJodG1sIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ2b3RlLWRpdiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxhLWJ1dHRvbiB0eXBlPSJwcmltYXJ5IiBzaGFwZT0icm91bmQiIDpzaXplPSInbGFyZ2UnIiBAY2xpY2s9InZvdGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRlbXBsYXRlICNpY29uPjxMaWtlT3V0bGluZWQgLz4gJm5ic3A754K56LWeOiB7e2RvYy52b3RlQ291bnR9fTwvdGVtcGxhdGU+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvYS1idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2EtY29sPgogICAgICAgICAgICA8L2Etcm93PgogICAgICAgIDwvYS1sYXlvdXQtY29udGVudD4KICAgIDwvYS1sYXlvdXQ+Cg=="},{"version":3,"sources":["F:\\MyProject\\MyWiki\\Wiki\\web\\src\\views\\doc.vue"],"names":[],"mappings":"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","file":"F:/MyProject/MyWiki/Wiki/web/src/views/doc.vue","sourceRoot":"","sourcesContent":["<template>\n    <a-layout>\n        <a-layout-content :style=\"{ background: '#fff', padding: '24px', margin: 0, minHeight: '280px' }\">\n            <h3 v-if=\"level1.length === 0\">对不起，该文档内容暂未上传！</h3>\n            <a-row>\n                <a-col :span=\"6\">\n                    <a-tree\n                        v-if=\"level1.length > 0\"\n                        :tree-data=\"level1\"\n                        @select=\"onSelect\"\n                        :replaceFields=\"{title: 'name',key: 'id', value: 'id'}\"\n                        :defaultExpandAll=\"true\"\n                        :defaultSelectedKeys=\"defaultSelectedKeys\"\n                    >\n                    </a-tree>\n                </a-col>\n                <a-col :span=\"18\">\n                    <div>\n                        <h2>{{doc.name}}</h2>\n                        <div>\n                            <span>阅读数: {{doc.viewCount}}</span>&nbsp;&nbsp;\n                            <span>点赞数: {{doc.voteCount}}</span>\n                        </div>\n                        <a-divider style=\"height: 2px; background-color: #9999cc\" />\n                    </div>\n                    <div class=\"wangeditor\" :innerHTML=\"html\"></div>\n                    <div class=\"vote-div\">\n                        <a-button type=\"primary\" shape=\"round\" :size=\"'large'\" @click=\"vote\">\n                            <template #icon><LikeOutlined /> &nbsp;点赞: {{doc.voteCount}}</template>\n                        </a-button>\n                    </div>\n                </a-col>\n            </a-row>\n        </a-layout-content>\n    </a-layout>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent, onMounted, ref, createVNode } from 'vue';\n    import axios from 'axios';\n    import {message, Modal} from 'ant-design-vue';\n    import {Tool} from \"@/util/tool\";\n    import {useRoute} from \"vue-router\";\n\n    export default defineComponent({\n        name: 'Doc',\n        setup(){\n            const route = useRoute();\n            const docs = ref();\n            const html = ref();\n            const defaultSelectedKeys = ref();\n            defaultSelectedKeys.value = [];\n            // 当前选中的文档\n            const doc = ref();\n            doc.value = {};\n\n            /**\n             *一级文档树，children属性就是二级文档\n             * [{\n             *     id: \"\",\n             *     name: \"\",\n             *     children: [{\n             *         id: \"\",\n             *         name: \"\",\n             *     }]\n             * }]\n             */\n                //一级文档树,children属性就是二级文档\n            const level1 = ref();\n            level1.value = [];\n\n            /**\n             * 内容查询\n             */\n            const handleQueryContent = (id: number) => {\n                axios.get(\"/doc/find-content/\" + id).then((response) => {\n                    const data = response.data;\n                    if (data.success){\n                        html.value = data.content;\n                    }else {\n                        message.error(data.message);\n                    }\n                });\n            };\n\n\n\n            /**\n             * 数据查询\n             */\n            const handleQuery = () => {\n                axios.get(\"/doc/all/\" + route.query.ebookId).then((response) => {\n                    const data = response.data;\n                    if (data.success){\n                        docs.value = data.content;\n\n                        level1.value = [];\n                        level1.value = Tool.array2Tree(docs.value,0);\n\n                        if (Tool.isNotEmpty(level1)){\n                            defaultSelectedKeys.value = [level1.value[0].id];\n                            handleQueryContent(level1.value[0].id);\n                            // 初始显示文档信息\n                            doc.value = level1.value[0];\n                        }\n                    }else {\n                        message.error(data.message);\n                    }\n                });\n            };\n\n\n            const onSelect = (selectedKeys: any, info: any) => {\n                console.log('selected',selectedKeys,info);\n                if (Tool.isNotEmpty(selectedKeys)){\n                    // 选中某一节点时，加载该节点的文档信息\n                    doc.value = info.selectedNodes[0].props;\n                    //加载内容\n                    handleQueryContent(selectedKeys[0]);\n                }\n            }\n\n            // 点赞\n            const vote = () => {\n                axios.get('/doc/vote/' + doc.value.id).then((response) => {\n                    const data = response.data;\n                    if (data.success) {\n                        doc.value.voteCount++;\n                    } else {\n                        message.error(data.message);\n                    }\n                });\n            };\n\n\n            onMounted(() => {\n                handleQuery();\n            });\n\n            return {\n                level1,\n                html,\n                onSelect,\n                defaultSelectedKeys,\n                doc,\n                vote\n            }\n        }\n    });\n</script>\n\n<style>\n    /* table 样式 */\n    .wangeditor table {\n        border-top: 1px solid #ccc;\n        border-left: 1px solid #ccc;\n    }\n    .wangeditor table td,\n    .wangeditor table th {\n        border-bottom: 1px solid #ccc;\n        border-right: 1px solid #ccc;\n        padding: 3px 5px;\n    }\n    .wangeditor table th {\n        border-bottom: 2px solid #ccc;\n        text-align: center;\n    }\n\n    /* blockquote 样式 */\n    .wangeditor blockquote {\n        display: block;\n        border-left: 8px solid #d0e5f2;\n        padding: 5px 10px;\n        margin: 10px 0;\n        line-height: 1.4;\n        font-size: 100%;\n        background-color: #f1f1f1;\n    }\n\n    /* code 样式 */\n    .wangeditor code {\n        display: inline-block;\n        *display: inline;\n        *zoom: 1;\n        background-color: #f1f1f1;\n        border-radius: 3px;\n        padding: 3px 5px;\n        margin: 0 3px;\n    }\n    .wangeditor pre code {\n        display: block;\n    }\n\n    /* ul ol 样式 */\n    .wangeditor ul, ol {\n        margin: 10px 0 10px 20px;\n    }\n\n    /* 和antdv p冲突，覆盖掉 */\n    .wangeditor blockquote p {\n        font-family:\"YouYuan\";\n        margin: 20px 10px !important;\n        font-size: 16px !important;\n        font-weight:600;\n    }\n\n    /* 点赞 */\n    .vote-div {\n        padding: 15px;\n        text-align: center;\n    }\n\n    /* 图片自适应 */\n    .wangeditor img {\n        max-width: 100%;\n        height: auto;\n    }\n\n    /* 视频自适应 */\n    .wangeditor iframe {\n        width: 100%;\n        height: 400px;\n    }\n</style>\n"]}]}