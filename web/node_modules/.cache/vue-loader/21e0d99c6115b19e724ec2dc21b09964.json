{"remainingRequest":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\MyProject\\MyWiki\\Wiki\\web\\src\\views\\doc.vue?vue&type=style&index=0&id=7704b1e4&lang=css","dependencies":[{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\src\\views\\doc.vue","mtime":1623050011000},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\css-loader\\dist\\cjs.js","mtime":1631892357965},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1631892361423},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\postcss-loader\\src\\index.js","mtime":1631892358826},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1631892357225},{"path":"F:\\MyProject\\MyWiki\\Wiki\\web\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1631892360081}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICAvKiB0YWJsZSDmoLflvI8gKi8KICAgIC53YW5nZWRpdG9yIHRhYmxlIHsKICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2NjYzsKICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNjY2M7CiAgICB9CiAgICAud2FuZ2VkaXRvciB0YWJsZSB0ZCwKICAgIC53YW5nZWRpdG9yIHRhYmxlIHRoIHsKICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2NjYzsKICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjY2NjOwogICAgICAgIHBhZGRpbmc6IDNweCA1cHg7CiAgICB9CiAgICAud2FuZ2VkaXRvciB0YWJsZSB0aCB7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNjY2M7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgfQoKICAgIC8qIGJsb2NrcXVvdGUg5qC35byPICovCiAgICAud2FuZ2VkaXRvciBibG9ja3F1b3RlIHsKICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICBib3JkZXItbGVmdDogOHB4IHNvbGlkICNkMGU1ZjI7CiAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7CiAgICAgICAgbWFyZ2luOiAxMHB4IDA7CiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsKICAgICAgICBmb250LXNpemU6IDEwMCU7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTsKICAgIH0KCiAgICAvKiBjb2RlIOagt+W8jyAqLwogICAgLndhbmdlZGl0b3IgY29kZSB7CiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICpkaXNwbGF5OiBpbmxpbmU7CiAgICAgICAgKnpvb206IDE7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTsKICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgcGFkZGluZzogM3B4IDVweDsKICAgICAgICBtYXJnaW46IDAgM3B4OwogICAgfQogICAgLndhbmdlZGl0b3IgcHJlIGNvZGUgewogICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgfQoKICAgIC8qIHVsIG9sIOagt+W8jyAqLwogICAgLndhbmdlZGl0b3IgdWwsIG9sIHsKICAgICAgICBtYXJnaW46IDEwcHggMCAxMHB4IDIwcHg7CiAgICB9CgogICAgLyog5ZKMYW50ZHYgcOWGsueqge+8jOimhuebluaOiSAqLwogICAgLndhbmdlZGl0b3IgYmxvY2txdW90ZSBwIHsKICAgICAgICBmb250LWZhbWlseToiWW91WXVhbiI7CiAgICAgICAgbWFyZ2luOiAyMHB4IDEwcHggIWltcG9ydGFudDsKICAgICAgICBmb250LXNpemU6IDE2cHggIWltcG9ydGFudDsKICAgICAgICBmb250LXdlaWdodDo2MDA7CiAgICB9CgogICAgLyog54K56LWeICovCiAgICAudm90ZS1kaXYgewogICAgICAgIHBhZGRpbmc6IDE1cHg7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgfQoKICAgIC8qIOWbvueJh+iHqumAguW6lCAqLwogICAgLndhbmdlZGl0b3IgaW1nIHsKICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgaGVpZ2h0OiBhdXRvOwogICAgfQoKICAgIC8qIOinhumikeiHqumAguW6lCAqLwogICAgLndhbmdlZGl0b3IgaWZyYW1lIHsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBoZWlnaHQ6IDQwMHB4OwogICAgfQo="},{"version":3,"sources":["F:\\MyProject\\MyWiki\\Wiki\\web\\src\\views\\doc.vue"],"names":[],"mappings":"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","file":"F:/MyProject/MyWiki/Wiki/web/src/views/doc.vue","sourceRoot":"","sourcesContent":["<template>\n    <a-layout>\n        <a-layout-content :style=\"{ background: '#fff', padding: '24px', margin: 0, minHeight: '280px' }\">\n            <h3 v-if=\"level1.length === 0\">对不起，该文档内容暂未上传！</h3>\n            <a-row>\n                <a-col :span=\"6\">\n                    <a-tree\n                        v-if=\"level1.length > 0\"\n                        :tree-data=\"level1\"\n                        @select=\"onSelect\"\n                        :replaceFields=\"{title: 'name',key: 'id', value: 'id'}\"\n                        :defaultExpandAll=\"true\"\n                        :defaultSelectedKeys=\"defaultSelectedKeys\"\n                    >\n                    </a-tree>\n                </a-col>\n                <a-col :span=\"18\">\n                    <div>\n                        <h2>{{doc.name}}</h2>\n                        <div>\n                            <span>阅读数: {{doc.viewCount}}</span>&nbsp;&nbsp;\n                            <span>点赞数: {{doc.voteCount}}</span>\n                        </div>\n                        <a-divider style=\"height: 2px; background-color: #9999cc\" />\n                    </div>\n                    <div class=\"wangeditor\" :innerHTML=\"html\"></div>\n                    <div class=\"vote-div\">\n                        <a-button type=\"primary\" shape=\"round\" :size=\"'large'\" @click=\"vote\">\n                            <template #icon><LikeOutlined /> &nbsp;点赞: {{doc.voteCount}}</template>\n                        </a-button>\n                    </div>\n                </a-col>\n            </a-row>\n        </a-layout-content>\n    </a-layout>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent, onMounted, ref, createVNode } from 'vue';\n    import axios from 'axios';\n    import {message, Modal} from 'ant-design-vue';\n    import {Tool} from \"@/util/tool\";\n    import {useRoute} from \"vue-router\";\n\n    export default defineComponent({\n        name: 'Doc',\n        setup(){\n            const route = useRoute();\n            const docs = ref();\n            const html = ref();\n            const defaultSelectedKeys = ref();\n            defaultSelectedKeys.value = [];\n            // 当前选中的文档\n            const doc = ref();\n            doc.value = {};\n\n            /**\n             *一级文档树，children属性就是二级文档\n             * [{\n             *     id: \"\",\n             *     name: \"\",\n             *     children: [{\n             *         id: \"\",\n             *         name: \"\",\n             *     }]\n             * }]\n             */\n                //一级文档树,children属性就是二级文档\n            const level1 = ref();\n            level1.value = [];\n\n            /**\n             * 内容查询\n             */\n            const handleQueryContent = (id: number) => {\n                axios.get(\"/doc/find-content/\" + id).then((response) => {\n                    const data = response.data;\n                    if (data.success){\n                        html.value = data.content;\n                    }else {\n                        message.error(data.message);\n                    }\n                });\n            };\n\n\n\n            /**\n             * 数据查询\n             */\n            const handleQuery = () => {\n                axios.get(\"/doc/all/\" + route.query.ebookId).then((response) => {\n                    const data = response.data;\n                    if (data.success){\n                        docs.value = data.content;\n\n                        level1.value = [];\n                        level1.value = Tool.array2Tree(docs.value,0);\n\n                        if (Tool.isNotEmpty(level1)){\n                            defaultSelectedKeys.value = [level1.value[0].id];\n                            handleQueryContent(level1.value[0].id);\n                            // 初始显示文档信息\n                            doc.value = level1.value[0];\n                        }\n                    }else {\n                        message.error(data.message);\n                    }\n                });\n            };\n\n\n            const onSelect = (selectedKeys: any, info: any) => {\n                console.log('selected',selectedKeys,info);\n                if (Tool.isNotEmpty(selectedKeys)){\n                    // 选中某一节点时，加载该节点的文档信息\n                    doc.value = info.selectedNodes[0].props;\n                    //加载内容\n                    handleQueryContent(selectedKeys[0]);\n                }\n            }\n\n            // 点赞\n            const vote = () => {\n                axios.get('/doc/vote/' + doc.value.id).then((response) => {\n                    const data = response.data;\n                    if (data.success) {\n                        doc.value.voteCount++;\n                    } else {\n                        message.error(data.message);\n                    }\n                });\n            };\n\n\n            onMounted(() => {\n                handleQuery();\n            });\n\n            return {\n                level1,\n                html,\n                onSelect,\n                defaultSelectedKeys,\n                doc,\n                vote\n            }\n        }\n    });\n</script>\n\n<style>\n    /* table 样式 */\n    .wangeditor table {\n        border-top: 1px solid #ccc;\n        border-left: 1px solid #ccc;\n    }\n    .wangeditor table td,\n    .wangeditor table th {\n        border-bottom: 1px solid #ccc;\n        border-right: 1px solid #ccc;\n        padding: 3px 5px;\n    }\n    .wangeditor table th {\n        border-bottom: 2px solid #ccc;\n        text-align: center;\n    }\n\n    /* blockquote 样式 */\n    .wangeditor blockquote {\n        display: block;\n        border-left: 8px solid #d0e5f2;\n        padding: 5px 10px;\n        margin: 10px 0;\n        line-height: 1.4;\n        font-size: 100%;\n        background-color: #f1f1f1;\n    }\n\n    /* code 样式 */\n    .wangeditor code {\n        display: inline-block;\n        *display: inline;\n        *zoom: 1;\n        background-color: #f1f1f1;\n        border-radius: 3px;\n        padding: 3px 5px;\n        margin: 0 3px;\n    }\n    .wangeditor pre code {\n        display: block;\n    }\n\n    /* ul ol 样式 */\n    .wangeditor ul, ol {\n        margin: 10px 0 10px 20px;\n    }\n\n    /* 和antdv p冲突，覆盖掉 */\n    .wangeditor blockquote p {\n        font-family:\"YouYuan\";\n        margin: 20px 10px !important;\n        font-size: 16px !important;\n        font-weight:600;\n    }\n\n    /* 点赞 */\n    .vote-div {\n        padding: 15px;\n        text-align: center;\n    }\n\n    /* 图片自适应 */\n    .wangeditor img {\n        max-width: 100%;\n        height: auto;\n    }\n\n    /* 视频自适应 */\n    .wangeditor iframe {\n        width: 100%;\n        height: 400px;\n    }\n</style>\n"]}]}